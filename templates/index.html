{% extends "base.html" %}
{% block content %}

<main class="max-w-4xl mx-auto px-4 py-12">
    <div class="mb-10 p-4 bg-white border border-dashed border-gray-300 rounded-lg text-center text-gray-400 italic text-[10px] uppercase tracking-widest">
        –†–µ–∫–ª–∞–º–Ω—ã–π –±–ª–æ–∫
    </div>

    <section class="bg-white rounded-[40px] shadow-xl p-8 md:p-12 border border-gray-50">
        <textarea id="text" class="w-full h-64 p-6 bg-gray-50 border border-gray-100 rounded-[30px] outline-none focus:ring-4 focus:ring-blue-100 text-lg resize-none transition-all font-medium" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –æ–∑–≤—É—á–∫–∏ (–¥–æ 2000 –∑–Ω–∞–∫–æ–≤)..."></textarea>
        
        <div class="mt-8 flex flex-col md:flex-row gap-6 items-end justify-between">
            <div class="w-full md:w-1/2">
                <label class="text-[10px] font-black text-gray-400 uppercase mb-3 block tracking-[0.2em] ml-2">–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ–ª–æ—Å –∏ —è–∑—ã–∫</label>
                <select id="voiceSelect" class="w-full p-4 bg-white border border-gray-200 rounded-2xl outline-none shadow-sm font-bold text-gray-700 cursor-pointer focus:border-blue-500 transition-all">
                    <optgroup label="–°–ù–ì / CIS">
                        <option value="ru-RU-DmitryNeural">–†—É—Å—Å–∫–∏–π ‚Äî –î–º–∏—Ç—Ä–∏–π (–ú—É–∂—Å–∫–æ–π)</option>
                        <option value="ru-RU-SvetlanaNeural">–†—É—Å—Å–∫–∏–π ‚Äî –°–≤–µ—Ç–ª–∞–Ω–∞ (–ñ–µ–Ω—Å–∫–∏–π)</option>
                        <option value="uk-UA-OstapNeural">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ ‚Äî –û—Å—Ç–∞–ø</option>
                        <option value="kk-KZ-DauletNeural">“ö–∞–∑–∞“õ—à–∞ ‚Äî –î–∞—É–ª–µ—Ç</option>
                    </optgroup>
                    <optgroup label="English">
                        <option value="en-US-AvaNeural">English (US) ‚Äî Ava</option>
                        <option value="en-US-GuyNeural">English (US) ‚Äî Guy</option>
                        <option value="en-GB-SoniaNeural">English (UK) ‚Äî Sonia</option>
                    </optgroup>
                    <optgroup label="Europe & Asia">
                        <option value="de-DE-KatjaNeural">Deutsch (Germany)</option>
                        <option value="fr-FR-DeniseNeural">Fran√ßais (France)</option>
                        <option value="zh-CN-YunxiNeural">Chinese</option>
                        <option value="ja-JP-NanamiNeural">Japanese</option>
                    </optgroup>
                </select>
            </div>
            <button onclick="generateAudio()" id="mainBtn" class="w-full md:w-auto px-16 py-5 bg-blue-600 text-white font-black rounded-[20px] hover:bg-blue-700 shadow-xl shadow-blue-200 transition-all active:scale-95 uppercase tracking-widest text-xs">
                –û–∑–≤—É—á–∏—Ç—å —Å–µ–π—á–∞—Å
            </button>
        </div>
    </section>

    <section class="mt-16 p-10 bg-white rounded-[40px] border border-gray-100 text-center shadow-sm">
        <h3 class="text-2xl font-black mb-2 uppercase tracking-tighter">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç ‚òï</h3>
        <p class="text-gray-500 mb-10 text-sm font-medium">–ú—ã —Ä–∞–±–æ—Ç–∞–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω–æ. –í–∞—à–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞–º –æ–ø–ª–∞—á–∏–≤–∞—Ç—å GPU-—Å–µ—Ä–≤–µ—Ä—ã.</p>
        <div class="flex flex-wrap justify-center gap-4">
            <a href="https://www.buymeacoffee.com/speechclone" target="_blank" class="px-8 py-4 bg-[#FFDD00] text-black font-black rounded-2xl hover:scale-105 transition-all text-xs uppercase tracking-widest shadow-md">‚òï Buy me a coffee</a>
            <a href="https://paypal.me/velial39@gmail.com" target="_blank" class="px-8 py-4 bg-[#0070ba] text-white font-black rounded-2xl hover:scale-105 transition-all text-xs uppercase tracking-widest shadow-md">PayPal</a>
            <button onclick="alert('BTC: —Ç–≤–æ–π-–∞–¥—Ä–µ—Å\nUSDT (TRC20): —Ç–≤–æ–π-–∞–¥—Ä–µ—Å')" class="px-8 py-4 bg-gray-900 text-white font-black rounded-2xl hover:scale-105 transition-all text-xs uppercase tracking-widest shadow-md">Crypto</button>
        </div>
    </section>

    <section class="mt-24 mb-12">
        <div class="text-center mb-16">
            <h3 class="text-4xl font-black text-gray-900 uppercase tracking-tighter">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h3>
            <div class="h-1.5 w-20 bg-blue-600 mx-auto mt-4 rounded-full"></div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white p-8 rounded-[35px] border border-gray-50 shadow-sm hover:shadow-md transition-all">
                <h4 class="text-lg font-black text-blue-600 mb-4 flex items-center gap-3 uppercase text-xs tracking-widest">üôå –≠—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ?</h4>
                <p class="text-gray-600 leading-relaxed text-sm font-medium">–ù–∏–∫–∞–∫–∏—Ö –ø–æ–¥–≤–æ—Ö–æ–≤. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ 2026 –≥–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å –±–µ–∑ –æ–≥—Ä–æ–º–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç.</p>
            </div>
            <div class="bg-white p-8 rounded-[35px] border border-gray-50 shadow-sm hover:shadow-md transition-all">
                <h4 class="text-lg font-black text-blue-600 mb-4 flex items-center gap-3 uppercase text-xs tracking-widest">üé¨ –ú–æ–∂–Ω–æ –≤ YouTube?</h4>
                <p class="text-gray-600 leading-relaxed text-sm font-medium">–ö–æ–Ω–µ—á–Ω–æ! –í—ã ‚Äî –ø–æ–ª–Ω–æ–ø—Ä–∞–≤–Ω—ã–π –≤–ª–∞–¥–µ–ª–µ—Ü —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞. –ì–æ–ª–æ—Å–∞ –∑–≤—É—á–∞—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ.</p>
            </div>
            <div class="bg-white p-8 rounded-[35px] border border-gray-50 shadow-sm hover:shadow-md transition-all">
                <h4 class="text-lg font-black text-blue-600 mb-4 flex items-center gap-3 uppercase text-xs tracking-widest">üìù –ü–æ—á–µ–º—É 2000 –∑–Ω–∞–∫–æ–≤?</h4>
                <p class="text-gray-600 leading-relaxed text-sm font-medium">–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–∑–≤—É—á–∏–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ. –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –±–æ–ª—å—à–µ ‚Äî –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–±–µ–π—Ç–µ –µ–≥–æ –Ω–∞ —á–∞—Å—Ç–∏.</p>
            </div>
            <div class="bg-white p-8 rounded-[35px] border border-gray-50 shadow-sm hover:shadow-md transition-all">
                <h4 class="text-lg font-black text-blue-600 mb-4 flex items-center gap-3 uppercase text-xs tracking-widest">üîí –ß—Ç–æ —Å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å—é?</h4>
                <p class="text-gray-600 leading-relaxed text-sm font-medium">–¢–µ–∫—Å—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –∞ –∞—É–¥–∏–æ —É–¥–∞–ª—è–µ—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞.</p>
            </div>
        </div>
    </section>

    <div class="mt-20 p-6 bg-white border border-dashed border-gray-200 rounded-3xl text-center text-gray-400 text-xs italic uppercase tracking-[0.2em]">
        –†–µ–∫–ª–∞–º–Ω—ã–π –±–ª–æ–∫ (AdSense Bottom)
    </div>
</main>

<script>
async function generateAudio() {
    const btn = document.getElementById('mainBtn');
    const textInput = document.getElementById('text');
    const voiceSelect = document.getElementById('voiceSelect');
    
    if(!textInput.value.trim()) return alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç");

    btn.disabled = true;
    btn.innerHTML = `<span class="animate-pulse tracking-widest">–ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º...</span>`;

    try {
        const response = await fetch('/api/generate', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify({
                text: textInput.value,
                voice: voiceSelect.value
            })
        });

        if (!response.ok) {
            throw new Error("–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞");
        }

        const data = await response.json();
        
        if(data.audio_url) {
            const fileName = data.audio_url.split('/').pop();
            // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–≥—Ä—É–∑–∫–∏
            window.location.href = `/download-page?file=${fileName}`;
        } else {
            alert("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–∞–π–ª–∞");
        }
    } catch (e) {
        console.error(e);
        alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.");
    } finally {
        btn.disabled = false;
        btn.innerText = "–û–∑–≤—É—á–∏—Ç—å —Å–µ–π—á–∞—Å";
    }
}
</script>
{% endblock %}





